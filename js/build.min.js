var rootApp=angular.module("rootApp",["rootApp","ct.ui.router.extras","ui.router","ui.swiper","ngSanitize","ngAnimate","images_preloader","angulartics","angulartics.google.analytics"]);rootApp.run(["$state","$rootScope","$urlRouter","$animate","$timeout","$window","$location","$q","preloader","Share","Rb",function(e,t,i,n,r,a,o,s,l,c,u){t.Rb=u,t.overlay_innerHTML="0%",t.firstImages=["/i/_main-back.jpg","/i/cosiness.png","/i/ribbon.png","/i/_lev2-back.jpg","/i/1-1.jpg","/i/1-2.jpg","/i/1-3.jpg","/i/1-4.jpg","/i/1-5.jpg","/i/2-1.jpg","/i/2-2.jpg","/i/2-3.jpg","/i/2-4.jpg","/i/2-5.jpg","/i/res-1.jpg"];var p=angular.element(document).find("#overlay");l.preloadImages(t.firstImages).then(function(e){t.$state.go("home",{},{reload:!0,location:!1}),r(function(){p.addClass("fade_hide"),t.$broadcast("styleAppear",{someProp:"Sending you an Object!"}),r(function(){p.find(".loader").remove()},800)},500)},function(e){},function(e){t.overlay_innerHTML=e+"%"}),t.___SHARE___URL___=a.___SHARE___URL___,t.share=c,t.location=o,t.$state=e,t.goBack=function(){a.history.back()},t.$on("$stateChangeStart",function(e,t,i,n,r){t.data&&t.data.pageTitle&&(a.document.title=t.data.pageTitle)}),n.enabled(!0),t.safeApply=function(e){var t=this.$$phase;if("$apply"==t||"$digest"==t)try{e()}catch(e){console.log("safeApply exception:",e)}finally{$digest()}else this.$apply(e)},t.decor=function(){document.getElementsByClassName("main").length&&console.log("WAS MAIN:",document.getElementsByClassName("main").length)},t.LoopRange=function(e,t,i){$min=e,$max=t,_current=parseInt(i)||parseInt(e),this.next=function(){return _current=_current+1<=$max?_current+1:$min,_current},this.previous=function(){return _current=_current-1>=$min?_current-1:$max,_current},this.setCurrent=function(e){(e=parseInt(e))>=$min&&e<=$max&&(_current=e)},this.getCurrent=function(){return _current},this.getNext=function(){return _current+1<=$max?_current+1:$min},this.getPrevious=function(){return _current-1>=$min?_current-1:$max}}}]),rootApp.config(["$httpProvider","$provide","$stickyStateProvider","$urlRouterProvider","$stateProvider","$locationProvider",function(e,t,i,n,r,a){a.html5Mode({enabled:!0,requireBase:!1}),e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8";var o={initOKuser:["$q","$rootScope","User","Rb",function(e,t,i,n){n.forceRbPixel("Главная_страница"),$(".header_brands").addClass("hide");var r=e.defer();if(t.inited)r.resolve(i.getUserOk());else{t.requestParameters=FAPI.Util.getRequestParameters();try{FAPI.init(t.requestParameters.api_server,t.requestParameters.apiconnection,function(){t.inited=!0,FAPI.UI.setWindowSize(0,735),FAPI.Client.call({fields:"first_name,last_name,location,pic640x480,gender",method:"users.getCurrentUser"},function(e,t,i){r.resolve(t)})},function(e){console.log("FAPI bad init ",e)})}catch(e){console.log("FAPI bad catch ",e)}}return r.promise}]};r.state("loader",{url:"/apl/",data:{pageTitle:"Идет загрузка..."},views:{"":{template:""}}}),r.state("home",{url:"/apl/home",data:{pageTitle:"Главная"},views:{"":{controller:"home",templateUrl:"home.html",resolve:o}}}).state("test",{url:"/apl/test",data:{pageTitle:"Тест какой ваш уют"},views:{"":{templateUrl:"test.html",controller:"q",resolve:{forceRbPixel:["Rb",function(e){return e.forceRbPixel("Вопрос_1")}]}}}}).state("result",{url:"/apl/result",data:{pageTitle:"Результат теста"},views:{"":{templateUrl:"result.html",controller:"r"}}}).state("articles",{url:"/apl/articles",data:{pageTitle:"Уютные стили"},views:{"":{templateUrl:"articles.html",controller:"a"}}}),n.otherwise("/")}]),rootApp.factory("Share",["$rootScope",function(e){var t={width:600,height:500},i=function(e){var t=Math.round(screen.width/2-e.width/2),i=0;screen.height>e.height&&(i=Math.round(screen.height/3-e.height/2));var n=window.open(e.url,"sl_"+e.service,"left="+t+",top="+i+",width="+e.width+",height="+e.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");n?n.focus():location.href=e.url},n=function(e){return e.replace(/([^:]\/)\/+/g,"$1")};return{buttons:function(){return["vk","fb","ok","mail"]},fb:function(e){return t.service="fb",t.url="https://www.facebook.com/sharer/sharer.php?u="+n(e),i(t)},vk:function(e){return t.service="vk",t.url="https://vk.com/share.php?url="+n(e),i(t)},ok:function(e){return t.service="ok",t.url="https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl="+n(e),i(t)},mail:function(e){return t.service="ok",t.url="https://connect.mail.ru/share?share_url="+n(e),i(t)}}}]),rootApp.factory("Test",["$http",function(e){function t(){return o}function i(){return s}function n(){return o.length}function r(){var e=[];return angular.forEach(o,function(t,i){e.push(t.img)}),e}function a(e){console.log("_put:",e)}var o=[{title:"Какая кухня вам скорее понравится?",img:"/i/1-1.jpg",answers:[{key:2,title:"обтекаемые формы, смелый дизайн, самые современные материалы – карбон, полиуретан"},{key:4,title:"темные деревянные фасады, классические формы"},{key:3,title:"выбеленное дерево, медные аксессуары, кованая мебель"},{key:1,title:"минималистские формы, фасады из стекла и металла"},{key:5,title:"дорогие материалы, но сдержанные формы, много полированных поверхностей"}]},{title:"Где вы предпочитаете хранить книги?",img:"/i/1-2.jpg",answers:[{key:4,title:"в открытых стеллажах"},{key:1,title:"за раздвижными панелями, которые сливаются со стеной"},{key:3,title:"в застекленных стеллажах"},{key:5,title:"в закрытых шкафах"},{key:2,title:"в частично открытых шкафах"}]},{title:"Какая посуда вам по душе?",img:"/i/1-3.jpg",answers:[{key:4,title:"разноцветный фарфор"},{key:3,title:"французский фаянс"},{key:1,title:"однотонный белый фарфор"},{key:2,title:"обтекаемых, «космических» форм, из инновационных материалов"},{key:5,title:"фарфор со строгим геометрическим рисунком"}]},{title:"На потолке вы предпочли бы видеть:",img:"/i/1-4.jpg",answers:[{key:3,title:"деревянные балки"},{key:4,title:"карниз из гипса"},{key:2,title:"замысловатые конструкции обтекаемой формы"},{key:1,title:"ровную оштукатуренную поверхность"},{key:5,title:"витражный потолок со стилизованным изображением лотосов"}]},{title:"Картину с каким сюжетом вы предпочли бы видеть на стене гостиной?",img:"/i/1-5.jpg",answers:[{key:1,title:"с абстрактным"},{key:4,title:"с пейзажем"},{key:5,title:"с изображениями людей, складывающимися из геометрических орнаментов"},{key:3,title:"с натюрмортом"},{key:2,title:"с изображениями космоса"}]},{title:"Какими цветами вы украсили бы свой дом?",img:"/i/1-6.jpg",answers:[{key:2,title:"ветками деревьев"},{key:4,title:"розами"},{key:3,title:"ромашками"},{key:5,title:"орхидеями"},{key:1,title:"листьями эвкалипта"}]},{title:"Идеальное кресло:",img:"/i/test/p6.jpg",answers:[{key:2,title:"обтекаемой формы, из белого высокотехнологичного пластика"},{key:5,title:"обтянутое жемчужно-серым кашемиром, строгой формы, с ножками из редких сортов дерева"},{key:1,title:"с основанием из светлого металла, четкой геометрической формы, обтянутое светлой тканью или кожей"},{key:3,title:"мягкое, с высокими подлокотниками, обтянутое тканью в цветочек"},{key:4,title:"из резного темного дерева, с простежкой"}]}],s=[{key:1,min:1,max:10,title:"Минимализм",text1:"Вы смотрите в будущее, и ваш стиль – минимализм. Ничего лишнего – гладкие глянцевые поверхности, четкая организация пространства, минимум цветов, максимум функциональности. ",img:"/i/res-1.jpg",share_img:"/i/share/shering_1.jpg",article:"<p>Предположительно понятие «минимализм» возникло от латинского слова minimus – «наименьший». В приложении к оформлению интерьера это воплотилось в следующие принципы: минимум цветов и форм, максимум функциональности и удобства.</p> <strong>Итак, три правила минимализма:</strong>",l:[{i:"много глянцевых поверхностей"},{i:"просторные помещения с открытой планировкой"},{i:"отсутствие мелкого декора – вазочек, тарелок на стенах, сувениров и т.д."}]},{key:2,min:11,max:20,title:"Футуризм",text1:"Вы – прогрессивный человек, и ваш стиль – футуризм. Футуристический стиль в оформлении интерьера навеян фантастическими фильмами о будущем и принципами оформления огромных космических кораблей – обтекаемые формы, ультрасовременные материалы и многофункциональная мебель.",img:"/i/res-2.jpg",share_img:"/i/share/shering_2.jpg",article:"<p>Футуризм – динамичное направление в дизайне интерьера, привлекающее людей смелых и нестандартно мыслящих. Фантастические фильмы о будущем «поставляют» множество идей для развития этого стиля в интерьере.</p><strong>Как же воплотить в жизнь идею о совершенном будущем в рамках дома или квартиры?</strong>",l:[{i:"преобладание белого цвета, а также – оттенков металла"},{i:"суперсовременные материалы – карбон, высокотехнологичный пластик, многослойное стекло"},{i:"необычные геометрические формы, асимметрия"}]},{key:3,min:21,max:30,title:"Прованс",text1:"Вы – натура утонченная и романтичная. Ваш стиль – прованс. Желание внести в городской интерьер атмосферу загородной беззаботности воплощается в выборе приглушенных оттенков, тканей с цветочным орнаментом, кованой или деревянной мебели и натуральных материалов в отделке.",img:"/i/res-3.jpg",share_img:"/i/share/shering_3.jpg",article:"<p>Стиль прованс в интерьере иногда еще называют французским кантри. Романтичная атмосфера беззаботной сельской жизни, близость к природе, душевная гармония – именно к этим эмоциям стремятся люди, выбирающие этот стиль.</p><strong>Приемы, которые помогут оформить дом в стиле прованс:</strong>",l:[{i:"много тканей с цветочным орнаментом"},{i:"приглушенные цвета – голубой, оливковый, оттенок заварного крема"},{i:"французские окна от пола до потолка"}]},{key:4,min:31,max:40,title:"Классический стиль",text1:"Гармония и стабильность – вот то, что вы цените в интерьере. Ваш стиль – классический. Соблюдение симметрии, дорогие отделочные материалы, предметы искусства, массивная, но изящная мебель – то, чем вам стоит наполнить свой дом.",img:"/i/res-4.jpg",share_img:"/i/share/shering_4.jpg",article:"<p>Классический стиль в интерьере – символ стабильности и высокого достатка. Недаром латинское слово classicus переводится как «образец», «эталон». Нередко понятие «классический стиль» трактуется по-разному – под это определение могут попадать как классические интерьеры Европы, так и античные мотивы, давшие жизнь стилю классицизм.</p> <strong>Выделим общие черты классического стиля:</strong>",l:[{i:"симметрия, прямые линии"},{i:"высококачественные отделочные материалы – дерево, мрамор, дорогие ткани, гипсовая лепнина"},{i:"несколько источников освещения"}]},{key:5,min:41,max:50,title:"Ар-деко",text1:"Ваш стиль – ар-деко, выбор аристократов. Ар-деко – воплощение сдержанной роскоши: самые дорогие материалы, акцент на строгой геометрии и четких линиях, полированное дерево и металл, шелк и мех, плюс немного африканских акцентов.",img:"/i/res-5.jpg",share_img:"/i/share/shering_5.jpg",article:"<p>Стиль ар-деко появился как реакция на аскетизм военного времени – люди устали от лишений, им хотелось удобных кресел и дорогих тканей. Сдержанная роскошь – пожалуй, самое краткое определение этого стиля. Простые, но изящные формы и самые дорогие и эксклюзивные материалы – все это ар-деко.</p><strong>Отличительные особенности этого стиля:</strong>",l:[{i:"акцент на геометрических формах, рисунках"},{i:"редкие материалы – пергамент, шагрень, дерево ценных пород"},{i:"много глянца – полированное дерево, металл, лак"}]}];return{getQuestions:t,getResults:i,put:a,getQuestionsLength:n,getVisuals:r}}]),rootApp.factory("Rb",["$timeout",function(e){var t=function(e){e=e.replace(/^\s+|\s+$/g,""),e=e.toLowerCase(),e=e.replace(/_+/g,"-"),e=e.replace(/"+/g,"");for(var t=["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я","А","Б","В","Г","Д","Е","Ё","Ж","З","И","Й","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Х","Ц","Ч","Ш","Щ","Ы","Ь","Э","Ю","Я","_",",",":",";",'"',"'","«","»"],i=["a","b","v","g","d","e","e","zh","z","i","y","k","l","m","n","o","p","r","s","t","u","f","h","c","ch","sh","sch","","y","","e","yu","ya","a","b","v","g","d","e","e","zh","z","i","y","k","l","m","n","o","p","r","s","t","u","f","h","c","ch","sh","sch","","y","","e","yu","ya","-","-","-","-","","","",""],n=0,r=t.length;n<r;n++)e=e.replace(new RegExp(t[n],"g"),i[n]);return e},i={"Главная_страница":"//rs.mail.ru/d25737901.gif","Главная_кнопка_уют":"//rs.mail.ru/d25737904.gif","Главная_кнопка_стили":"//rs.mail.ru/d25737907.gif","Главная_пройти_тест":"//rs.mail.ru/d25737909.gif","Вопрос_1":"//rs.mail.ru/d25737913.gif","Вопрос_2":"//rs.mail.ru/d25737915.gif","Вопрос_3":"//rs.mail.ru/d25737916.gif","Вопрос_4":"//rs.mail.ru/d25737918.gif","Вопрос_5":"//rs.mail.ru/d25737924.gif","Вопрос_6":"//rs.mail.ru/d25737926.gif","Вопрос_7":"//rs.mail.ru/d25737931.gif","Минимализм_тест":"//rs.mail.ru/d25737944.gif","Футуризм_тест":"//rs.mail.ru/d25737946.gif","Ар-деко_тест":"//rs.mail.ru/d25737947.gif","Прованс_тест":"//rs.mail.ru/d25737948.gif","Классический стиль_тест":"//rs.mail.ru/d25737953.gif","Поделиться":"//rs.mail.ru/d25737956.gif","Кнопка_правила_интерьера":"//rs.mail.ru/d25737957.gif","Минимализм_стили":"//rs.mail.ru/d25737961.gif","Футуризм_стили":"//rs.mail.ru/d25737963.gif","Ар-деко_стили":"//rs.mail.ru/d25737966.gif","Прованс_стили":"//rs.mail.ru/d25737967.gif","Классический стиль_стили":"//rs.mail.ru/d25737969.gif"};return{forceRbPixel:function(n){if(console.log("forceRbPixel",n),void 0!==i[n]){var r=new Image;e(function(){r.src=i[n]+"?"+Math.random()+"___"+t(n)},500)}}}}]),rootApp.factory("User",["$http","$rootScope","$q","$filter",function(e,t,i,n){var r={},a={},o={},s={},l={},c={},u=0;return{fetchUserData:function(){return e({method:"GET",url:"/user.json"}).then(function(e){return e.data})},fetchFriendData:function(e){var t=this,n=i.defer();return FAPI.Client.call({fields:"first_name,last_name,pic640x480,gender",uid:e,method:"users.getInfoBy"},function(e,i,r){r?n.resolve(null):(t.setFriendData(i.user),n.resolve(i.user))}),n.promise},getAnalyzed:function(){return u},updateAnalyzed:function(e){u=e},setAnalyzed:function(i){return e({method:"POST",url:"/app/a",data:{r:i},params:t.requestParameters,paramSerializer:"$httpParamSerializerJQLike"}).then(function(e){return u=e.data.analyzed,e.data})},fetchUserFriends:function(){if(l.length>0){var n=i.defer();return n.resolve(l),n.promise}return e({method:"GET",url:"/app/friends",params:t.requestParameters,paramSerializer:"$httpParamSerializerJQLike"}).then(function(e){return console.log("fetchUserFriends:",e),void 0!==r._gifts&&angular.forEach(e.data,function(t,i){var n=r._gifts.indexOf(t.uid);n!=-1&&(console.log("_Indx:",n),console.log("key:",i),e.data.splice(i,1))}),e.data})},getUserFriends:function(){return l},setUserFriends:function(e){l=e},updateUserFriends:function(e){var t=l.indexOf(s);console.log("_Indx:",t),l.splice(t,1)},fetchUserPhotos:function(){var e=i.defer();return c.length>0?(e.resolve(c),e.promise):(FAPI.Client.call({method:"photos.getPhotos",fields:"photo.pic640x480 ,photo.mark_count",count:100,detectTotalCount:!0},function(t,i,n){i&&i.photos&&i.photos.length>0&&(c=i.photos,e.resolve(c))}),e.promise)},getUserData:function(){return r},setUserData:function(e){r=e},getUserOk:function(){return o},setUserOk:function(e){o=e},getFriendData:function(e){return void 0===a.uid?this.fetchFriendData(e):a},setFriendData:function(e){a=e},updateUserOkPhoto:function(e){o.pic640x480=e},setSelectedFriend:function(e){s=n("filter")(l,{uid:e},!0)[0]},getSelectedFriend:function(){return s}}}]),angular.module("rootApp").run(["$templateCache",function(e){e.put("articles.html",'<div class="container inner"><div class="content"><swiper initial-slide="{{initialSlide}}" on-slide-change-end="onTransition" touch-events-target="null" touch-move-stop-propagation="{{bool}}" on-init="onInit" prevent-сlicks="{{bool}}" prevent-сlicks-propagation="{{bool}}" simulate-touch="{{bool}}"><slides><slide ng-repeat="resultData in articles"><div class="result" rel="{{resultData.title}}_стили"><div class="block2 flex-container align-top"><div class="small-p50"></div><div class="small-p50"><h2 class="ttu">{{resultData.title}}</h2></div></div><div class="block2 flex-container align-top"><div class="small-p50"><img ng-src="{{resultData.img}}"></div><div class="small-p50"><div ng-bind-html="resultData.article"></div><ol class="article__list"><li ng-repeat="li in resultData.l">{{li.i}}</li></ol></div></div><div class="block2 flex-container align-top"><div class="small-p50 ar"></div><div class="small-p50"><a ng-href="http://r.mail.ru/n250885458" analytics-on="click" analytics-event="получить комнату мечты" analytics-category="Результат" href="http://r.mail.ru/n250885458" target="_blank" class="btn ttu">Получить комнату мечты</a></div></div></div></slide></slides><prev></prev><next></next><pagination></pagination></swiper></div></div>'),e.put("home.html",'<div class="container main"><div class="content"><h1 class="ttu fg-wht fwbold al">Ваш дом<sup>—</sup><br>ваш</h1><img src="/i/cosiness.png" class="cosiness"><a ui-sref="test" ng-click="Rb.forceRbPixel(\'Главная_пройти_тест\');" analytics-on="click" analytics-event="пройти тест" analytics-category="Главная" class="ribbon">пройдите тест</a><h2 class="ttu fg-wht fwlght ac">Какой стиль интерьера Вам подходит?<br>Мы&nbsp;подберем для вас именно тот стиль,<br>в&nbsp;котором вам будет комфортно и&nbsp;уютно.</h2><div class="brands"><a href="http://r.mail.ru/n250885458" target="_blank"><img src="/i/logo-muscle-1.png" class="logo-muscle"></a><a href="http://r.mail.ru/n250885458" target="_blank"><img src="/i/logo-pronto-2.png" class="logo-pronto"></a><a href="http://r.mail.ru/n250885458" target="_blank"><img src="/i/logo-utya-3.png" class="logo-utya"></a></div></div></div>'),e.put("result.html",'<div class="container inner"><div class="content"><div class="result"><div class="block2 flex-container align-top"><div class="small-p50"></div><div class="small-p50"><h2 class="ttu">{{resultData.title}}</h2></div></div><div class="block2 flex-container align-top"><div class="small-p50"><img ng-src="{{resultData.img}}"></div><div class="small-p50"><p>{{resultData.text1}}</p><p>Однако уют – это не только обстановка нашей квартиры, но еще и атмосфера чистоты.<a href="http://r.mail.ru/n250885458" target="_blank" class="b"><b>Чистящие средства Mr. Muscle, Туалетный Утенок и Pronto позволят легко навести чистоту в доме!</b></a>Перейдите на промо-сайт и получите возможность создать свою комнату мечты, получив сертификат на обстановку и приятные мелочи для дома.</p></div></div><div class="block2 flex-container align-top"><div class="small-p50 ar"><a ui-sref="articles" ng-click="Rb.forceRbPixel(\'Кнопка_правила_интерьера\');" analytics-on="click" analytics-event="Кнопка правила интерьера" analytics-category="Результат" class="btn ttu">правила интерьера</a></div><div class="small-p50"><a href="http://r.mail.ru/n250885458" analytics-on="click" analytics-event="получить комнату мечты" analytics-category="Результат" target="_blank" class="btn ttu">получить комнату мечты</a></div></div><div class="block2 flex-container align-middle share"><div class="small-p50 ar"><a ng-click="mediatopicPost();Rb.forceRbPixel(\'Поделиться\');" analytics-on="click" analytics-event="Поделиться" analytics-category="Результат" class="fg-orng ar">Поделиться результатами<br>с друзьями</a></div><div class="small-p50"><a ng-click="mediatopicPost();Rb.forceRbPixel(\'Поделиться\');" analytics-on="click" analytics-event="Поделиться" analytics-category="Результат" class="hrt"></a></div></div></div></div></div>'),e.put("test.html",'<div class="container inner"><div class="content ac"><div class="block questions flex-container qanima anima-{{count}}"><div class="small-p20 question" ng-repeat="answer in questions[count].answers"><input type="radio" id="radio-{{$index}}" name="selectedAnswer" ng-model="user.selectedAnswer" ng-value="{{answer.key}}" ng-change="next(user.selectedAnswer)"><label for="radio-{{$index}}" class="radio-custom-label"><div><img ng-src="/i/{{count+1}}-{{$index+1}}.jpg"></div><span>{{answer.title}}</span></label></div></div><div class="count f23 fg-orng">{{count+1}}</div><h1 class="ttu question_title ac qanima anima-{{count}}" ng-cloak>{{questions[count].title}}&nbsp;</h1></div></div>')}]),rootApp.controller("home",["$rootScope","$scope","$timeout","preloader","initOKuser","User",function(e,t,i,n,r,a){if(a.setUserOk(r),e.user=a.getUserOk(),null==e.user)return window.location.href=__app_url;e.testImages!==!0&&(t.testImages=["/i/3-1.jpg","/i/3-2.jpg","/i/3-3.jpg","/i/3-4.jpg","/i/3-5.jpg","/i/4-1.jpg","/i/4-2.jpg","/i/4-3.jpg","/i/4-4.jpg","/i/4-5.jpg","/i/5-1.jpg","/i/5-2.jpg","/i/5-3.jpg","/i/5-4.jpg","/i/5-5.jpg","/i/6-1.jpg","/i/6-2.jpg","/i/6-3.jpg","/i/6-4.jpg","/i/6-5.jpg","/i/7-1.jpg","/i/7-2.jpg","/i/7-3.jpg","/i/7-4.jpg","/i/7-5.jpg"],n.preloadImages(t.testImages).then(function(t){e.testImages=!0},function(e){console.log("Loading failed on at least one image:",e)},function(e){})),t.$on("$viewContentLoaded",function(){t.$on("styleAppear",function(e,t){(new TimelineMax).add([TweenMax.fromTo(".content h1",.25,{opacity:0,marginTop:"-10%"},{opacity:1,marginTop:0,delay:.55}),TweenMax.fromTo(".cosiness",.25,{opacity:0,marginTop:"-10%"},{opacity:1,marginTop:0,delay:.6}),TweenMax.fromTo(".ribbon",.5,{opacity:0,marginTop:"-5%"},{opacity:1,marginTop:0,delay:.75}),TweenMax.fromTo(".content h2",.5,{opacity:0,marginTop:"-5%"},{opacity:1,marginTop:0,delay:.85}),TweenMax.fromTo(".brands .logo-muscle",1.5,{opacity:0},{opacity:1,delay:1.25}),TweenMax.fromTo(".brands .logo-pronto",1.5,{opacity:0},{opacity:1,delay:1.35}),TweenMax.fromTo(".brands .logo-utya",1.5,{opacity:0},{opacity:1,delay:1.45})])})}),t.$on("$destroy",function(){$(".header_brands").removeClass("hide"),(new TimelineMax).add([TweenMax.fromTo(".header_brands .logo-muscle",1.5,{opacity:0},{opacity:1,delay:1.25}),TweenMax.fromTo(".header_brands .logo-pronto",1.5,{opacity:0},{opacity:1,delay:1.35}),TweenMax.fromTo(".header_brands .logo-utya",1.5,{opacity:0},{opacity:1,delay:1.45})])}),i(function(){},50)}]),rootApp.controller("q",["$rootScope","$scope","$window","$timeout","Test","preloader","Rb","$analytics",function(e,t,i,n,r,a,o,s){function l(){}function c(){}function u(e){n(function(){console.log("_next:",e),t.newScores[e-1].count+=1,t.count<t.total-1&&void 0!=e?(t.scores+=parseInt(e),t.count++,t.user.selectedAnswer=null,o.forceRbPixel("Вопрос_"+(t.count+1)),s.pageTrack("/apl/test/"+(t.count+1),{title:"Вопрос "+(t.count+1)})):t.checkScore(e)},0)}function p(i){if(console.log("_checkScore:",i),void 0!=i){var n=g(t.newScores),r=n.reduce(function(e,t){return e.count>t.count?e:t});t.scores+=parseInt(i),t.testEnded=!0,t.results.forEach(function(t,i){r.key==t.key&&(e.resultData=t,console.log("$rootScope.resultData:",e.resultData),o.forceRbPixel(t.title+"_тест"),s.pageTrack("/apl/result/"+t.key,{title:"Результат "+t.title}),e.$state.go("result",{},{reload:!0,location:!1}))})}}function g(e){for(var t,i,n=e.length;n;t=Math.floor(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e}function d(){t.scores=0,t.count=0,t.testEnded=!1}e.testImages!==!0&&(t.testImages=["/i/res-1.jpg","/i/res-2.jpg","/i/res-3.jpg","/i/res-4.jpg","/i/res-5.jpg"],a.preloadImages(t.testImages).then(function(t){e.testImages=!0},function(e){console.log("Loading failed on at least one image:",e)},function(e){})),t.$on("$viewContentLoaded",function(){n(function(){t.questions=r.getQuestions()},400),e.isTest=!0}),t.$on("$destroy",function(){e.isTest=!1}),t.testEnded=!1,t.imgChosen=!1,t.results=r.getResults(),t.total=r.getQuestionsLength(),t.count=0,t.hideSoci=!0,t.newScores=[{key:1,count:0},{key:2,count:0},{key:3,count:0},{key:4,count:0},{key:5,count:0}],t.next=u,t.checkScore=p,t.onceMore=d,t.chooseImage=c,t.showSoci=l,t.scores=0,e.resultData=null,t.user={selectedAnswer:null},s.pageTrack("/apl/test/"+(t.count+1),{title:"Вопрос "+(t.count+1)}),t.visuals=r.getVisuals()}]),rootApp.filter("pluralFilter",[function(){return function(e,t,i,n){return e=Math.abs(e),(e%=100)>=5&&e<=20?n:(e%=10,1==e?t:e>=2&&e<=4?i:n)}}]),rootApp.filter("leadingZeroTen",[function(){return function(e){var t="";return e<10&&(t="0"),t+e}}]),rootApp.controller("r",["$rootScope","$scope","$window","$timeout","Test","preloader","Rb",function(e,t,i,n,r,a,o){t.Rb=o,t.$on("$viewContentLoaded",function(){}),t.$on("$destroy",function(){}),t.testEnded=!0,t.resultData=e.resultData,console.log("RESULT $scope.resultData:",t.resultData),t.submitting=!1,t.mediatopicPost=function(){t.submitting=!0,t.submitting=!1;var e={media:[{type:"text",text:t.resultData.title},{type:"app",text:" ",images:[{url:"https://family-promo.vtrvl.ru/"+t.resultData.share_img,mark:"_____MARK_____",title:" "}],actions:[{mark:"_____MARK_____",text:" "}]}]};FAPI.UI.postMediatopic(e,!1)}}]),rootApp.controller("a",["$rootScope","$scope","$window","$timeout","Test","preloader","Rb","$analytics",function(e,t,i,n,r,a,o,s){t.Rb=o,e.testImages!==!0&&(t.testImages=["/i/res-2.jpg","/i/res-3.jpg","/i/res-4.jpg","/i/res-5.jpg"],a.preloadImages(t.testImages).then(function(t){e.testImages=!0},function(e){console.log("Loading failed on at least one image:",e)},function(e){})),t.bool=!1,t.articles=[],t.$on("$viewContentLoaded",function(){console.log("A:"),n(function(){t.articles=r.getResults(),e.resultData?t.initialSlide=parseInt(e.resultData.key)-1:(t.initialSlide=parseInt(0),s.pageTrack("/apl/articles/"+t.initialSlide,{title:"Стиль "+t.articles[t.initialSlide].title}),o.forceRbPixel(t.articles[t.initialSlide].title+"_стили"))},100),e.isArticles=!0}),t.$on("$destroy",function(){t.secondSwiper.destroy(!0,!0),e.isArticles=!1}),t.onTransition=function(e){var t=$(e.container).find(".swiper-slide-active .result").attr("rel");o.forceRbPixel(t),console.log("onTransition:",e.activeIndex+1),s.pageTrack("/apl/articles/"+(e.activeIndex+1),{title:"Стиль "+t.replace("_стили","")})},t.firstSwiper=null,t.secondSwiper=null,t.swiperInited=!1,t.onInit=function(e){t.swiperInited?(t.secondSwiper=e,t.firstSwiper.destroy(),t.secondSwiper.params.preventClicks=!1,console.log("onInit:",t.secondSwiper.params)):(t.swiperInited=!0,t.firstSwiper=e)}}]);
